<!DOCTYPE html>
<html lang="zh-CN">
<head>
<!-- 2025-02-11 Tue 21:50 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>emacsä¸€é”®æ’å…¥-æ—¥æœŸ,å†œå†,æœˆç›¸,ä¸‡å¹´å†</title>
<meta name="author" content="pengshao" />
<meta name="keywords" content="emacs,bookmark" />
<meta name="generator" content="Org Mode" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="../css/org.css" />
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href="../index.html"> UP </a>
 |
 <a accesskey="H" href="../index.html"> HOME </a>
</div><div id="content" class="content">
<header>
<h1 class="title">emacsä¸€é”®æ’å…¥-æ—¥æœŸ,å†œå†,æœˆç›¸,ä¸‡å¹´å†</h1>
</header><nav id="table-of-contents" role="doc-toc">
<h2>&#30446;&#24405;</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#orgafa292f">1. wttr.inå¤©æ°”ä¿¡æ¯çš„APIè°ƒå–</a></li>
<li><a href="#org56e6911">2. pyphoonæœˆç›¸çš„è°ƒå–</a></li>
<li><a href="#orgd8610b9">3. å†œå†APIè°ƒå–åœ°å€</a>
<ul>
<li><a href="#org03e30a7">3.1. å…ˆå†™ä¸€ä¸ªshellscriptæ¥è°ƒå–å†œå†APIåœ°å€ä¸­çš„å­—ç¬¦ä¸²</a></li>
<li><a href="#org0cc0621">3.2. è¿™ä¸ªæ•ˆæœ" &lt;å­Ÿæ˜¥-æ­£æœˆ-åå›› è›‡ ä¹™å·³-æˆŠå¯…-è¾›äº¥&gt; "</a></li>
<li><a href="#org04828d3">3.3. ç„¶åå°±èƒ½ç”¨elispè°ƒç”¨è¿™ä¸¤ä¸ªæ–‡ä»¶</a></li>
</ul>
</li>
<li><a href="#orgaa7cf07">4. è¿˜å¯ä»¥åœ¨å·²å¯åŠ¨çš„é‚£ä¸ª*scratch*é¡µé¢æ˜¾ç¤ºå‡ºæ¥,è™½ç„¶æ²¡ä»€ä¹ˆç”¨,ä½†æ˜¯æ€»æ¯”é‚£ä¸ªå•¥ä¿¡æ¯éƒ½æ²¡æœ‰çš„å¼º.</a>
<ul>
<li><a href="#org6dd2cca">4.1. æ•ˆæœ</a></li>
<li><a href="#orgc823199">4.2. è®¾ç½®çš„å¿«æ·é”®,å¯ä»¥éšæ„è°ƒå–</a></li>
</ul>
</li>
<li><a href="#org235ba37">5. é…ç½®æ–‡ä»¶</a></li>
</ul>
</div>
</nav>

<div id="outline-container-orgafa292f" class="outline-2">
<h2 id="orgafa292f"><span class="section-number-2">1.</span> wttr.inå¤©æ°”ä¿¡æ¯çš„APIè°ƒå–</h2>
<div class="outline-text-2" id="text-1">
<p>
wttr.inçš„åœ°å€ <a href="https://github.com/chubin/wttr.in">https://github.com/chubin/wttr.in</a>
</p>

<div class="org-src-container">
<pre class="src src-lisp"><span class="linenr">1: </span>;;æ·»åŠ æµå—å¤©æ°”çš„æ“ä½œ
<span class="linenr">2: </span>(defun insert-weather ()
<span class="linenr">3: </span>  (interactive)
<span class="linenr">4: </span>  (insert (shell-command-to-string "curl wttr.in/jinan?format=4 2&gt; /dev/null")))
<span class="linenr">5: </span>
<span class="linenr">6: </span>(global-set-key (kbd "C-c m w") #'insert-weather)
</pre>
</div>
</div>
</div>


<div id="outline-container-org56e6911" class="outline-2">
<h2 id="org56e6911"><span class="section-number-2">2.</span> pyphoonæœˆç›¸çš„è°ƒå–</h2>
<div class="outline-text-2" id="text-2">
<p>
pyphoonçš„åœ°å€ <a href="https://github.com/chubin/pyphoon">https://github.com/chubin/pyphoon</a>
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span class="linenr">1: </span>;;æ·»åŠ æœˆç›¸çš„æ“ä½œ
<span class="linenr">2: </span>(defun insert-pyphoon ()
<span class="linenr">3: </span>  (interactive)
<span class="linenr">4: </span>  (insert (shell-command-to-string "source ~/mypython/bin/activate &amp;&amp; pyphoon")))
<span class="linenr">5: </span>
<span class="linenr">6: </span>(global-set-key (kbd "C-c m o") #'insert-pyphoon)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd8610b9" class="outline-2">
<h2 id="orgd8610b9"><span class="section-number-2">3.</span> å†œå†APIè°ƒå–åœ°å€</h2>
<div class="outline-text-2" id="text-3">
<p>
<a href="https://api.aa1.cn/doc/almanac.html">https://api.aa1.cn/doc/almanac.html</a>
</p>
</div>

<div id="outline-container-org03e30a7" class="outline-3">
<h3 id="org03e30a7"><span class="section-number-3">3.1.</span> å…ˆå†™ä¸€ä¸ªshellscriptæ¥è°ƒå–å†œå†APIåœ°å€ä¸­çš„å­—ç¬¦ä¸²</h3>
<div class="outline-text-3" id="text-3-1">
<p>
ä¾‹å¦‚è¿™ä¸ªæ•ˆæœ: "2025-02-11 å­Ÿæ˜¥ æ­£æœˆ åå›› è›‡ ä¹™å·³ æˆŠå¯… è¾›äº¥ å–œç¥ï¼šè¥¿å— ç¦ç¥ï¼šè¥¿åŒ— è´¢ç¥ï¼šæ­£ä¸œé˜³è´µï¼šä¸œåŒ— é˜´è´µï¼šæ­£å— "
é…ç½®æ–‡ä»¶å¦‚ä¸‹:
</p>
<div class="org-src-container">
<pre class="src src-sh"><span class="linenr"> 1: </span>#!/bin/bash
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span># è·å–å½“å‰æ—¥æœŸ
<span class="linenr"> 4: </span>current_date=$(date +"%Y-%m-%d")
<span class="linenr"> 5: </span>
<span class="linenr"> 6: </span># ä½¿ç”¨ wget å‘½ä»¤è·å–å½“å¤©çš„å†œå†æ—¥æœŸï¼Œå¹¶ä¸”é™é»˜è¿‡ç¨‹
<span class="linenr"> 7: </span>response=$(wget -qO- "https://www.36jxs.com/api/Commonweal/almanac?sun=${current_date}")
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span># è§£æå†œå†æ—¥æœŸ
<span class="linenr">10: </span>lunar_GregorianDateTime=$(echo $response | grep -o '"GregorianDateTime":"[^"]*' | grep -o '[^"]*$')
<span class="linenr">11: </span>lunar_month=$(echo $response | grep -o '"LMonth":"[^"]*' | grep -o '[^"]*$')
<span class="linenr">12: </span>lunar_day=$(echo $response | grep -o '"LDay":"[^"]*' | grep -o '[^"]*$')
<span class="linenr">13: </span>lunar_year=$(echo $response | grep -o '"LYear":"[^"]*' | grep -o '[^"]*$')
<span class="linenr">14: </span>lunar_tiangany=$(echo $response | grep -o '"TianGanDiZhiYear":"[^"]*' | grep -o '[^"]*$')
<span class="linenr">15: </span>lunar_tianganm=$(echo $response | grep -o '"TianGanDiZhiMonth":"[^"]*' | grep -o '[^"]*$')
<span class="linenr">16: </span>lunar_tiangand=$(echo $response | grep -o '"TianGanDiZhiDay":"[^"]*' | grep -o '[^"]*$')
<span class="linenr">17: </span>lunar_shenwei=$(echo $response | grep -o '"ShenWei":"[^"]*' | grep -o '[^"]*$')
<span class="linenr">18: </span>lunar_monthname=$(echo $response | grep -o '"LMonthName":"[^"]*' | grep -o '[^"]*$')
<span class="linenr">19: </span>
<span class="linenr">20: </span>
<span class="linenr">21: </span>
<span class="linenr">22: </span>
<span class="linenr">23: </span>echo " $lunar_GregorianDateTime $lunar_monthname $lunar_month $lunar_day $lunar_year $lunar_tiangany $lunar_tianganm $lunar_tiangand $lunar_shenwei"
</pre>
</div>
</div>
</div>

<div id="outline-container-org0cc0621" class="outline-3">
<h3 id="org0cc0621"><span class="section-number-3">3.2.</span> è¿™ä¸ªæ•ˆæœ" &lt;å­Ÿæ˜¥-æ­£æœˆ-åå›› è›‡ ä¹™å·³-æˆŠå¯…-è¾›äº¥&gt; "</h3>
<div class="outline-text-3" id="text-3-2">
<p>
é…ç½®æ–‡ä»¶å¦‚ä¸‹:
</p>
<div class="org-src-container">
<pre class="src src-sh"><span class="linenr"> 1: </span>#!/bin/bash
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span># è·å–å½“å‰æ—¥æœŸ
<span class="linenr"> 4: </span>current_date=$(date +"%Y-%m-%d")
<span class="linenr"> 5: </span>
<span class="linenr"> 6: </span># ä½¿ç”¨ wget å‘½ä»¤è·å–å½“å¤©çš„å†œå†æ—¥æœŸï¼Œå¹¶ä¸”é™é»˜è¿‡ç¨‹
<span class="linenr"> 7: </span>response=$(wget -qO- "https://www.36jxs.com/api/Commonweal/almanac?sun=${current_date}")
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span># è§£æå†œå†æ—¥æœŸ
<span class="linenr">10: </span>#lunar_GregorianDateTime=$(echo $response | grep -o '"GregorianDateTime":"[^"]*' | grep -o '[^"]*$')
<span class="linenr">11: </span>lunar_monthname=$(echo $response | grep -o '"LMonthName":"[^"]*' | grep -o '[^"]*$')
<span class="linenr">12: </span>lunar_month=$(echo $response | grep -o '"LMonth":"[^"]*' | grep -o '[^"]*$')
<span class="linenr">13: </span>lunar_day=$(echo $response | grep -o '"LDay":"[^"]*' | grep -o '[^"]*$')
<span class="linenr">14: </span>lunar_year=$(echo $response | grep -o '"LYear":"[^"]*' | grep -o '[^"]*$')
<span class="linenr">15: </span>lunar_tiangany=$(echo $response | grep -o '"TianGanDiZhiYear":"[^"]*' | grep -o '[^"]*$')
<span class="linenr">16: </span>lunar_tianganm=$(echo $response | grep -o '"TianGanDiZhiMonth":"[^"]*' | grep -o '[^"]*$')
<span class="linenr">17: </span>lunar_tiangand=$(echo $response | grep -o '"TianGanDiZhiDay":"[^"]*' | grep -o '[^"]*$')
<span class="linenr">18: </span>#lunar_shenwei=$(echo $response | grep -o '"ShenWei":"[^"]*' | grep -o '[^"]*$')
<span class="linenr">19: </span>
<span class="linenr">20: </span>
<span class="linenr">21: </span>
<span class="linenr">22: </span>
<span class="linenr">23: </span>
<span class="linenr">24: </span>echo " &lt;$lunar_monthname-$lunar_month-$lunar_day $lunar_year $lunar_tiangany-$lunar_tianganm-$lunar_tiangand&gt; "
</pre>
</div>
</div>
</div>

<div id="outline-container-org04828d3" class="outline-3">
<h3 id="org04828d3"><span class="section-number-3">3.3.</span> ç„¶åå°±èƒ½ç”¨elispè°ƒç”¨è¿™ä¸¤ä¸ªæ–‡ä»¶</h3>
<div class="outline-text-3" id="text-3-3">
<div class="org-src-container">
<pre class="src src-lisp"><span class="linenr"> 1: </span>  (defun insert-nongli ()
<span class="linenr"> 2: </span>  (interactive)
<span class="linenr"> 3: </span>  (insert (shell-command-to-string "~/.emacs.d/loadfile/nongli.sh")))
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span>(global-set-key (kbd "C-c m n") #'insert-nongli)
<span class="linenr"> 6: </span>
<span class="linenr"> 7: </span>(defun insert-nonglijian ()
<span class="linenr"> 8: </span>  (interactive)
<span class="linenr"> 9: </span>  (insert (shell-command-to-string "~/.emacs.d/loadfile/nonglijian.sh")))
<span class="linenr">10: </span>
<span class="linenr">11: </span>(global-set-key (kbd "C-c m j") #'insert-nonglijian)
<span class="linenr">12: </span>
</pre>
</div>
</div>
</div>
</div>


<div id="outline-container-orgaa7cf07" class="outline-2">
<h2 id="orgaa7cf07"><span class="section-number-2">4.</span> è¿˜å¯ä»¥åœ¨å·²å¯åŠ¨çš„é‚£ä¸ª*scratch*é¡µé¢æ˜¾ç¤ºå‡ºæ¥,è™½ç„¶æ²¡ä»€ä¹ˆç”¨,ä½†æ˜¯æ€»æ¯”é‚£ä¸ªå•¥ä¿¡æ¯éƒ½æ²¡æœ‰çš„å¼º.</h2>
<div class="outline-text-2" id="text-4">
<p>
å°†ä»¥ä¸‹ä»£ç æ·»åŠ åˆ°ä½ çš„ Emacs é…ç½®æ–‡ä»¶ä¸­ï¼š
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span class="linenr">1: </span>;; åœ¨ Emacs å¯åŠ¨æ—¶æ¸…ç©º *scratch* ç¼“å†²åŒºå¹¶æ’å…¥ç‰¹å®šå‡½æ•°ä»£ç 
<span class="linenr">2: </span>  (setq initial-scratch-message "") ; æ¸…ç©ºåˆå§‹çš„ *scratch* æ¶ˆæ¯
<span class="linenr">3: </span>  (with-current-buffer "*scratch*"
<span class="linenr">4: </span>  ;(let ((result1 (insert-weather)))
<span class="linenr">5: </span>  ;(insert (format " %s\n" result1)))
<span class="linenr">6: </span>    (call-interactively 'insert-nongli)
<span class="linenr">7: </span>    (call-interactively 'insert-weather)
<span class="linenr">8: </span>    (call-interactively 'insert-pyphoon)
<span class="linenr">9: </span>     )
</pre>
</div>
</div>
<div id="outline-container-org6dd2cca" class="outline-3">
<h3 id="org6dd2cca"><span class="section-number-3">4.1.</span> æ•ˆæœ</h3>
<div class="outline-text-3" id="text-4-1">

<figure id="orgb403980">
<img src="emacs-init.png" alt="emacs-init.png">

</figure>
</div>
</div>


<div id="outline-container-orgc823199" class="outline-3">
<h3 id="orgc823199"><span class="section-number-3">4.2.</span> è®¾ç½®çš„å¿«æ·é”®,å¯ä»¥éšæ„è°ƒå–</h3>
<div class="outline-text-3" id="text-4-2">
<ul class="org-ul">
<li><p>
C-c m o æ’å…¥æœˆç›¸(åˆšå¥½æ˜¯æ»¡æœˆ)
</p>
<div class="ASCII" id="org0874ed6">
<p>
		.-------&#x2013;&#x2014;.	 
	  .&#x2013;'  o     . .   `&#x2013;.	 
       .-'   .    O   .       . `-.	 
     -'@   @@@@@@@   .  @@@@@      `-.	 
   /@@@  @@@@@@@@@@@   @@@@@@@   .    \	 
  /    o @@@@@@@@@@@   @@@@@@@       . \.	 
 @@  o   @@@@@@@@@@@.   @@@@@@@   O      \	 
@@@@   .   @@@@@@@o    @@@@@@@@@@     @@@ \	 
</p>
<table>


<colgroup>
<col  class="org-left">
</colgroup>
<tbody>
<tr>
<td class="org-left">@@@@@               . @@@@@@@@@@@@@ o @@@@</td>
</tr>
</tbody>
</table>
<p>
@@@@@  O  `.-./  .      @@@@@@@@@@@@    @@  \	 First Quarter +
 @@@@    &#x2013;`-'       o     @@@@@@@@ @@@@    |	 6  5:40:26
</p>
<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">
</colgroup>
<tbody>
<tr>
<td class="org-left">@ @@@        `    o      .  @@   . @@@@@@@</td>
<td class="org-left">Full Moon -</td>
</tr>
</tbody>
</table>
<p>
     @@  @         .-.     @@@   @@@@@@@  |	 1  0:10:09
. @        @@@     `-'   . @@@@   @@@@  o /	 
</p>
<table>


<colgroup>
<col  class="org-left">
</colgroup>
<tbody>
<tr>
<td class="org-left">@@   @@@@@ .           @@   .</td>
</tr>
</tbody>
</table>
<p>
   @@@@  @\@@    /  .  O    .     o   . /	 
 o  @@     \ \  /         .    .       /	 
\     .    .\.-.___   .      .   .-. /'	 
 \           `-'                `-' /	 
   -.   o   / |     o    O   .   .-'	 
     `-.   /     .       .    .-'	 
	`&#x2013;.       .      .&#x2013;'	 
	    `-------&#x2013;&#x2014;'	 
</p>

</div></li>

<li><p>
C-c m w æ’å…¥æµå—çš„å¤©æ°”
</p>
<pre class="example" id="org9f5a708">
jinan: ğŸŒ¦   ğŸŒ¡ï¸+7Â°C ğŸŒ¬ï¸â†—8km/h
</pre></li>
<li><p>
C-c m n æ’å…¥å†œå†
</p>
<pre class="example" id="orga852c38">
2025-02-11 å­Ÿæ˜¥ æ­£æœˆ åå›› è›‡ ä¹™å·³ æˆŠå¯… è¾›äº¥ å–œç¥ï¼šè¥¿å— ç¦ç¥ï¼šè¥¿åŒ— è´¢ç¥ï¼šæ­£ä¸œé˜³è´µï¼šä¸œåŒ— é˜´è´µï¼šæ­£å— 
</pre></li>
<li><p>
C-c m j ç®€ä»‹ç‰ˆæœ¬çš„å†œå†
</p>
<pre class="example" id="org39fc398">
&lt;å­Ÿæ˜¥-æ­£æœˆ-åå›› è›‡ ä¹™å·³-æˆŠå¯…-è¾›äº¥&gt; 
</pre></li>
<li><p>
C-c m y æ˜¾ç¤ºå‡ºå½“å¹´æ—¶é—´å·²ç»æµé€çš„ç™¾åˆ†æ¯”
</p>
<pre class="example" id="org8fad6d5">
[///                           ] 11%
</pre></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org235ba37" class="outline-2">
<h2 id="org235ba37"><span class="section-number-2">5.</span> é…ç½®æ–‡ä»¶</h2>
<div class="outline-text-2" id="text-5">
<div class="org-src-container">
<pre class="src src-lisp"><span class="linenr"> 1: </span>;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
<span class="linenr"> 2: </span>;; -*- coding: utf-8; lexical-binding: t -*-
<span class="linenr"> 3: </span>;;pengshao-openweather.el---è‡ªåŠ¨æ’å…¥å¤©æ°”çš„æ•™ç¨‹
<span class="linenr"> 4: </span>;;&lt;2025-02-08/Saturday 19:32:10&gt;
<span class="linenr"> 5: </span>;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
<span class="linenr"> 6: </span>
<span class="linenr"> 7: </span>;;æ·»åŠ æµå—å¤©æ°”çš„æ“ä½œ
<span class="linenr"> 8: </span>(defun insert-weather ()
<span class="linenr"> 9: </span>  (interactive)
<span class="linenr">10: </span>  (insert (shell-command-to-string "curl wttr.in/jinan?format=4 2&gt; /dev/null")))
<span class="linenr">11: </span>
<span class="linenr">12: </span>
<span class="linenr">13: </span>(global-set-key (kbd "C-c m w") #'insert-weather)
<span class="linenr">14: </span>
<span class="linenr">15: </span>
<span class="linenr">16: </span>;;æ·»åŠ æœˆç›¸çš„æ“ä½œ
<span class="linenr">17: </span>(defun insert-pyphoon ()
<span class="linenr">18: </span>  (interactive)
<span class="linenr">19: </span>  (insert (shell-command-to-string "source ~/mypython/bin/activate &amp;&amp; pyphoon")))
<span class="linenr">20: </span>
<span class="linenr">21: </span>
<span class="linenr">22: </span>(global-set-key (kbd "C-c m o") #'insert-pyphoon)
<span class="linenr">23: </span>
<span class="linenr">24: </span>
<span class="linenr">25: </span>(defun insert-nongli ()
<span class="linenr">26: </span>  (interactive)
<span class="linenr">27: </span>  (insert (shell-command-to-string "~/.emacs.d/loadfile/nongli.sh")))
<span class="linenr">28: </span>
<span class="linenr">29: </span>(global-set-key (kbd "C-c m n") #'insert-nongli)
<span class="linenr">30: </span>
<span class="linenr">31: </span>(defun insert-nonglijian ()
<span class="linenr">32: </span>  (interactive)
<span class="linenr">33: </span>  (insert (shell-command-to-string "~/.emacs.d/loadfile/nonglijian.sh")))
<span class="linenr">34: </span>
<span class="linenr">35: </span>(global-set-key (kbd "C-c m j") #'insert-nonglijian)
<span class="linenr">36: </span>
<span class="linenr">37: </span>
<span class="linenr">38: </span>
<span class="linenr">39: </span>(provide 'pengshao-openweather)
</pre>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-164487790-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-164487790-1'); </script>
</div>
</body>
</html>
